<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Step 1: Koreksi Typo dengan Fuzzy Matching - Data Cleansing IZAT</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <style>
    /* Code Block Styling */
    .code-block {
      background: #1e293b;
      border-radius: 0.75rem;
      padding: 1.5rem;
      overflow-x: auto;
      margin: 1rem 0;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
    }
    .code-block pre {
      color: #e2e8f0;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 0.875rem;
      line-height: 1.6;
      margin: 0;
    }
    .code-block .comment { color: #6b7280; font-style: italic; }
    .code-block .keyword { color: #f472b6; font-weight: 600; }
    .code-block .string { color: #34d399; }
    .code-block .function { color: #60a5fa; }
    .code-block .number { color: #fbbf24; }

    /* Data Cleansing Menu Accent */
    .nav-dropdown-menu.cleansing-menu a {
      border-left: 3px solid transparent;
    }
    .nav-dropdown-menu.cleansing-menu a:hover {
      border-left-color: #35B971;
    }
    .nav-dropdown-menu.cleansing-menu a.active {
      border-left-color: #35B971;
    }

    /* Hero badge for cleansing */
    .cleansing-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: linear-gradient(135deg, #35B971, #059669);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 2rem;
      font-size: 0.875rem;
      font-weight: 600;
    }

    /* Before-After Comparison */
    .comparison-box {
      background: white;
      border-radius: 1rem;
      padding: 1.5rem;
      border: 1px solid var(--pln-gray-200);
      margin: 1rem 0;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 1rem;
      align-items: center;
      margin-top: 1rem;
    }

    .comparison-item {
      padding: 1rem;
      border-radius: 0.5rem;
      text-align: center;
    }

    .comparison-item.before {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .comparison-item.after {
      background: rgba(53, 185, 113, 0.1);
      border: 1px solid rgba(53, 185, 113, 0.3);
    }

    .comparison-arrow {
      font-size: 1.5rem;
      color: var(--pln-gray-400);
    }

    .comparison-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--pln-gray-500);
    }

    .comparison-value {
      font-size: 1.25rem;
      font-weight: 700;
      font-family: 'Consolas', monospace;
    }

    .comparison-item.before .comparison-value {
      color: #EF4444;
    }

    .comparison-item.after .comparison-value {
      color: #35B971;
    }

    /* Example section */
    .example-section {
      background: linear-gradient(135deg, rgba(53, 185, 113, 0.05), rgba(0, 175, 240, 0.05));
      border: 1px solid rgba(53, 185, 113, 0.2);
      border-radius: 1rem;
      padding: 1.5rem;
      margin: 1.5rem 0;
    }

    .example-section h4 {
      color: var(--pln-green);
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <img src="assets/images/PLN-Nusantara-Power-sm.png" alt="PLN Nusantara Power" class="logo-img">
        <span class="logo-subtitle">Unit Pembangkitan Indramayu</span>
      </div>
      <nav class="nav">
        <a href="index.html" class="nav-link">Beranda</a>
        <div class="nav-dropdown">
          <button class="nav-dropdown-toggle active">Data Cleansing</button>
          <div class="nav-dropdown-menu cleansing-menu">
            <a href="09_typo_correction.html" class="active"><span class="dropdown-icon">‚úèÔ∏è</span> Koreksi Typo</a>
            <a href="10_location_standardization.html"><span class="dropdown-icon">üìç</span> Standardisasi Lokasi</a>
            <a href="11_company_standardization.html"><span class="dropdown-icon">üè¢</span> Standardisasi Perusahaan</a>
            <a href="12_date_standardization.html"><span class="dropdown-icon">üìÖ</span> Standardisasi Tanggal</a>
            <a href="13_risk_severity.html"><span class="dropdown-icon">‚ö†Ô∏è</span> Risk Severity</a>
            <a href="14_quality_workload.html"><span class="dropdown-icon">üìä</span> Quality & Workload</a>
            <a href="15_trend_comparison.html"><span class="dropdown-icon">üìà</span> Tren & Komparasi</a>
          </div>
        </div>
        <div class="nav-dropdown">
          <button class="nav-dropdown-toggle">Basic Analysis</button>
          <div class="nav-dropdown-menu">
            <a href="01_area_risk.html"><span class="dropdown-icon">üìç</span> Analisis Risiko Area</a>
            <a href="02_team_performance.html"><span class="dropdown-icon">üë•</span> Performa Tim</a>
            <a href="03_resolution_workflow.html"><span class="dropdown-icon">‚öôÔ∏è</span> Alur Penyelesaian</a>
            <a href="04_shift_analysis.html"><span class="dropdown-icon">üïê</span> Pola Shift & Hari</a>
            <a href="05_asset_tracking.html"><span class="dropdown-icon">üîß</span> Tracking Aset</a>
          </div>
        </div>
        <div class="nav-dropdown">
          <button class="nav-dropdown-toggle">Advanced Analysis</button>
          <div class="nav-dropdown-menu ai-menu">
            <a href="06_risk_prediction.html"><span class="dropdown-icon">üìä</span> Model Prediksi Risiko</a>
            <a href="07_smart_recommendation.html"><span class="dropdown-icon">üí°</span> Smart Recommendation</a>
            <a href="08_anomaly_detection.html"><span class="dropdown-icon">üîç</span> Deteksi Anomali</a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1>Koreksi Typo dengan Fuzzy Matching</h1>
        <p>Pembersihan kesalahan pengetikan pada data IZAT menggunakan algoritma string similarity</p>
        <span class="cleansing-badge">
          <span>üßπ</span> Data Cleansing - Step 1
        </span>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <main class="container">

    <!-- Overview Stats -->
    <section class="section">
      <div class="stat-cards">
        <div class="stat-card primary">
          <div class="stat-label">Data yang Diproses</div>
          <div class="stat-value">5.575</div>
          <div class="stat-change positive">baris data temuan IZAT (Jan-Okt 2025)</div>
        </div>
        <div class="stat-card success">
          <div class="stat-label">Field yang Dibersihkan</div>
          <div class="stat-value">3 Field</div>
          <div class="stat-change">judul, kondisi, rekomendasi</div>
        </div>
        <div class="stat-card warning">
          <div class="stat-label">Kamus Standar</div>
          <div class="stat-value">32 Kata</div>
          <div class="stat-change">dengan 150+ variasi typo</div>
        </div>
        <div class="stat-card info">
          <div class="stat-label">Metode</div>
          <div class="stat-value">Rapidfuzz</div>
          <div class="stat-change">Fuzzy string matching (threshold 85%)</div>
        </div>
      </div>
    </section>

    <!-- Why It's Needed Section -->
    <section class="section">
      <div class="section-header">
        <h2>
          <span class="icon">‚ùì</span>
          Mengapa Koreksi Typo Diperlukan?
        </h2>
        <p>Tantangan kualitas data pada pelaporan K3 di lapangan</p>
      </div>

      <div class="analysis-box">
        <h4>Latar Belakang Masalah</h4>
        <p style="margin-bottom: 1rem; color: var(--pln-gray-700);">
          Data IZAT dikumpulkan melalui aplikasi mobile di lapangan oleh petugas patroli K3.
          Kondisi pelaporan yang dilakukan saat patroli - terburu-buru, menggunakan keyboard mobile,
          atau dalam kondisi tidak nyaman - menyebabkan tingginya kesalahan pengetikan (typo).
        </p>
        <ul>
          <li><strong>Mengganggu analisis frekuensi</strong> - Kata "ready" (63x) dan "redy" (300x) dihitung sebagai dua kata berbeda, padahal maknanya sama</li>
          <li><strong>Mengurangi akurasi pencarian</strong> - Filter untuk mencari "hydrant" tidak akan menangkap "hidrqnt" atau "hidrant"</li>
          <li><strong>Mempersulit kategorisasi otomatis</strong> - Machine learning model akan bingung membedakan typo vs kata yang benar-benar berbeda</li>
          <li><strong>Menurunkan profesionalitas laporan</strong> - Data dengan banyak typo terlihat tidak terkelola dengan baik</li>
        </ul>
      </div>

      <div class="grid-2 mb-4">
        <div class="comparison-box">
          <h4>Contoh Nyata dari Data IZAT</h4>
          <div class="comparison-grid">
            <div class="comparison-item before">
              <div class="comparison-label">‚ùå Sebelum Koreksi</div>
              <div class="comparison-value">redy</div>
              <div style="font-size: 0.75rem; margin-top: 0.5rem; color: var(--pln-gray-600);">
                Frekuensi: <strong>300 baris</strong>
              </div>
            </div>
            <div class="comparison-arrow">‚Üí</div>
            <div class="comparison-item after">
              <div class="comparison-label">‚úÖ Sesudah Koreksi</div>
              <div class="comparison-value">ready</div>
              <div style="font-size: 0.75rem; margin-top: 0.5rem; color: var(--pln-gray-600);">
                Total ready: <strong>363 baris</strong>
              </div>
            </div>
          </div>
        </div>

        <div class="comparison-box">
          <h4>Contoh Typo pada Peralatan K3</h4>
          <div class="comparison-grid">
            <div class="comparison-item before">
              <div class="comparison-label">‚ùå Sebelum Koreksi</div>
              <div class="comparison-value">hidrqnt</div>
              <div style="font-size: 0.75rem; margin-top: 0.5rem; color: var(--pln-gray-600);">
                Frekuensi: <strong>26 baris</strong>
              </div>
            </div>
            <div class="comparison-arrow">‚Üí</div>
            <div class="comparison-item after">
              <div class="comparison-label">‚úÖ Sesudah Koreksi</div>
              <div class="comparison-value">hydrant</div>
              <div style="font-size: 0.75rem; margin-top: 0.5rem; color: var(--pln-gray-600);">
                Total hydrant: <strong>58 baris</strong>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="insights-grid">
        <div class="insight-item danger">
          <div class="insight-title">300 Baris "redy"</div>
          <div class="insight-value">Kata "redy" muncul 300x lebih sering dari "ready" (63x) - padahal maksudnya sama!</div>
        </div>
        <div class="insight-item warning">
          <div class="insight-title">42 Baris "bqik"</div>
          <div class="insight-value">Typo "bqik" muncul 42x vs "baik" (546x) - keyboard mobile sering salah tekan q/a</div>
        </div>
        <div class="insight-item warning">
          <div class="insight-title">26 Baris "hidrqnt"</div>
          <div class="insight-value">Hydrant salah eja 26x - critical untuk tracking peralatan fire safety</div>
        </div>
      </div>
    </section>

    <!-- Methodology Section -->
    <section class="section">
      <div class="section-header">
        <h2>
          <span class="icon">üî¨</span>
          Metodologi: Bagaimana Fuzzy Matching Bekerja?
        </h2>
        <p>Algoritma string similarity untuk koreksi otomatis kesalahan pengetikan</p>
      </div>

      <div class="grid-2 mb-4">
        <div class="card">
          <div class="card-header">
            <h3>Langkah 1: Exact Match</h3>
          </div>
          <div class="card-body">
            <p style="color: var(--pln-gray-600); margin-bottom: 1rem;">
              Pertama-tama, sistem mencari apakah kata tersebut ada dalam kamus variasi typo yang sudah diketahui.
            </p>
            <div class="code-block">
<pre><span class="comment"># Contoh lookup dictionary</span>
LOOKUP_TYPO = {
  <span class="string">'redy'</span>: <span class="string">'ready'</span>,
  <span class="string">'reddy'</span>: <span class="string">'ready'</span>,
  <span class="string">'bqik'</span>: <span class="string">'baik'</span>,
  <span class="string">'hidrqnt'</span>: <span class="string">'hydrant'</span>,
  ...
}

<span class="comment"># Jika kata ada di kamus, langsung ganti</span>
<span class="keyword">if</span> kata <span class="keyword">in</span> LOOKUP_TYPO:
    <span class="keyword">return</span> LOOKUP_TYPO[kata]</pre>
            </div>
            <div style="margin-top: 1rem; padding: 1rem; background: rgba(53, 185, 113, 0.1); border-radius: 0.5rem;">
              <strong style="color: var(--pln-green);">Keuntungan:</strong>
              <span style="color: var(--pln-gray-600);">
                Cepat, akurat 100%, tidak ada false positive
              </span>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Langkah 2: Fuzzy Match</h3>
          </div>
          <div class="card-body">
            <p style="color: var(--pln-gray-600); margin-bottom: 1rem;">
              Jika tidak ada di kamus, gunakan algoritma similarity untuk mencari kata paling mirip (threshold 85%).
            </p>
            <div class="code-block">
<pre><span class="comment"># Import library rapidfuzz</span>
<span class="keyword">from</span> rapidfuzz <span class="keyword">import</span> fuzz, process

<span class="comment"># Cari kata paling mirip</span>
match_result = process.<span class="function">extractOne</span>(
    kata_input,
    kata_standar_list,
    scorer=fuzz.ratio
)

<span class="comment"># Jika similarity >= 85%, ganti</span>
<span class="keyword">if</span> match_result[<span class="number">1</span>] >= <span class="number">85</span>:
    <span class="keyword">return</span> match_result[<span class="number">0</span>]</pre>
            </div>
            <div style="margin-top: 1rem; padding: 1rem; background: rgba(0, 175, 240, 0.1); border-radius: 0.5rem;">
              <strong style="color: var(--pln-light-blue);">Keuntungan:</strong>
              <span style="color: var(--pln-gray-600);">
                Menangkap typo baru yang belum ada di kamus
              </span>
            </div>
          </div>
        </div>
      </div>

      <div class="example-section">
        <h4>üéØ Contoh Cara Kerja Fuzzy Matching</h4>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Input Typo</th>
                <th>Kata Kandidat</th>
                <th>Similarity Score</th>
                <th>Keputusan</th>
              </tr>
            </thead>
            <tbody>
              <tr class="highlight">
                <td><code>redy</code></td>
                <td><code>ready</code></td>
                <td><strong>90%</strong></td>
                <td><span class="badge badge-success">‚úì Koreksi ke "ready"</span></td>
              </tr>
              <tr class="highlight">
                <td><code>bqik</code></td>
                <td><code>baik</code></td>
                <td><strong>88%</strong></td>
                <td><span class="badge badge-success">‚úì Koreksi ke "baik"</span></td>
              </tr>
              <tr class="highlight">
                <td><code>hidrqnt</code></td>
                <td><code>hydrant</code></td>
                <td><strong>87%</strong></td>
                <td><span class="badge badge-success">‚úì Koreksi ke "hydrant"</span></td>
              </tr>
              <tr>
                <td><code>xyz</code></td>
                <td><code>ok</code></td>
                <td><strong>45%</strong></td>
                <td><span class="badge badge-danger">‚úó Tidak dikoreksi</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p style="margin-top: 1rem; color: var(--pln-gray-600); font-size: 0.875rem;">
          <strong>Catatan:</strong> Threshold 85% dipilih untuk balance antara recall (menangkap typo) dan precision (menghindari false positive).
          Jika terlalu rendah, akan banyak koreksi salah. Jika terlalu tinggi, typo tidak terdeteksi.
        </p>
      </div>
    </section>

    <!-- Source Code Highlights -->
    <section class="section">
      <div class="section-header">
        <h2>
          <span class="icon">üíª</span>
          Highlight Source Code
        </h2>
        <p>Implementasi teknis dari proses koreksi typo</p>
      </div>

      <div class="card mb-4">
        <div class="card-header">
          <h3>1. Membangun Kamus Standar</h3>
        </div>
        <div class="card-body">
          <p style="color: var(--pln-gray-600); margin-bottom: 1rem;">
            Kamus berisi kata-kata standar beserta semua variasi typo-nya berdasarkan eksplorasi data.
          </p>
          <div class="code-block">
<pre><span class="comment"># Kamus Standar untuk Koreksi Typo</span>
<span class="comment"># Format: { 'kata_standar': ['variasi1', 'variasi2', ...] }</span>

KAMUS_STANDAR = {
    <span class="comment"># === KONDISI ===</span>
    <span class="string">'ready'</span>: [<span class="string">'redy'</span>, <span class="string">'reddy'</span>, <span class="string">'rdy'</span>, <span class="string">'readi'</span>, <span class="string">'redyi'</span>, <span class="string">'redi'</span>],
    <span class="string">'aman'</span>: [<span class="string">'amn'</span>, <span class="string">'amam'</span>, <span class="string">'amaan'</span>, <span class="string">'amna'</span>],
    <span class="string">'baik'</span>: [<span class="string">'bqik'</span>, <span class="string">'baii'</span>, <span class="string">'abik'</span>, <span class="string">'bakm'</span>, <span class="string">'bauk'</span>, <span class="string">'naik'</span>, <span class="string">'baim'</span>],
    <span class="string">'rusak'</span>: [<span class="string">'ruask'</span>, <span class="string">'rusaj'</span>, <span class="string">'rusqk'</span>, <span class="string">'rusal'</span>],

    <span class="comment"># === REKOMENDASI ===</span>
    <span class="string">'diperbaiki'</span>: [<span class="string">'di perbaiki'</span>, <span class="string">'di perbaki'</span>, <span class="string">'diperbaki'</span>, <span class="string">'dperbaiki'</span>],
    <span class="string">'dibersihkan'</span>: [<span class="string">'di bersihkan'</span>, <span class="string">'dibershkan'</span>, <span class="string">'di bersikan'</span>],

    <span class="comment"># === JUDUL (Peralatan K3) ===</span>
    <span class="string">'apar'</span>: [<span class="string">'apqr'</span>, <span class="string">'qpar'</span>, <span class="string">'apAr'</span>, <span class="string">'apae'</span>],
    <span class="string">'hydrant'</span>: [<span class="string">'hidrant'</span>, <span class="string">'hidrqnt'</span>, <span class="string">'hidran'</span>, <span class="string">'hydrnt'</span>, <span class="string">'hidranr'</span>],
}

<span class="keyword">print</span>(<span class="function">f</span><span class="string">"Kamus standar berisi {len(KAMUS_STANDAR)} kata standar."</span>)
<span class="keyword">print</span>(<span class="function">f</span><span class="string">"Total variasi typo: {sum(len(v) for v in KAMUS_STANDAR.values())}"</span>)</pre>
          </div>
        </div>
      </div>

      <div class="card mb-4">
        <div class="card-header">
          <h3>2. Fungsi Koreksi Typo Utama</h3>
        </div>
        <div class="card-body">
          <p style="color: var(--pln-gray-600); margin-bottom: 1rem;">
            Fungsi ini menerapkan dua strategi: exact match terlebih dahulu, lalu fuzzy match jika tidak cocok.
          </p>
          <div class="code-block">
<pre><span class="keyword">def</span> <span class="function">koreksi_typo</span>(teks, lookup_dict, threshold_fuzzy=<span class="number">85</span>):
    <span class="string">"""
    Fungsi untuk mengoreksi typo pada teks.

    Parameter:
        teks: string yang akan dikoreksi
        lookup_dict: dictionary lookup typo -> standar
        threshold_fuzzy: threshold similarity untuk fuzzy matching (0-100)

    Return:
        tuple: (teks_terkoreksi, is_corrected, metode_koreksi)
    """</span>
    <span class="keyword">if</span> pd.<span class="function">isna</span>(teks) <span class="keyword">or</span> teks == <span class="string">''</span>:
        <span class="keyword">return</span> teks, <span class="keyword">False</span>, <span class="keyword">None</span>

    teks_lower = <span class="function">str</span>(teks).<span class="function">lower</span>().<span class="function">strip</span>()

    <span class="comment"># LANGKAH 1: Exact Match</span>
    <span class="keyword">if</span> teks_lower <span class="keyword">in</span> lookup_dict:
        <span class="keyword">return</span> lookup_dict[teks_lower], <span class="keyword">True</span>, <span class="string">'exact_match'</span>

    <span class="comment"># LANGKAH 2: Fuzzy Match</span>
    kata_standar_list = <span class="function">list</span>(<span class="function">set</span>(lookup_dict.<span class="function">values</span>()))

    match_result = process.<span class="function">extractOne</span>(
        teks_lower,
        kata_standar_list,
        scorer=fuzz.ratio
    )

    <span class="keyword">if</span> match_result <span class="keyword">and</span> match_result[<span class="number">1</span>] >= threshold_fuzzy:
        <span class="keyword">return</span> match_result[<span class="number">0</span>], <span class="keyword">True</span>, <span class="function">f</span><span class="string">'fuzzy_match({match_result[1]})'</span>

    <span class="comment"># Tidak ada koreksi</span>
    <span class="keyword">return</span> teks_lower, <span class="keyword">False</span>, <span class="keyword">None</span></pre>
          </div>
        </div>
      </div>

      <div class="card mb-4">
        <div class="card-header">
          <h3>3. Menerapkan Koreksi pada DataFrame</h3>
        </div>
        <div class="card-body">
          <p style="color: var(--pln-gray-600); margin-bottom: 1rem;">
            Proses batch untuk mengoreksi seluruh kolom pada DataFrame dengan tracking statistik.
          </p>
          <div class="code-block">
<pre><span class="keyword">def</span> <span class="function">terapkan_koreksi_kolom</span>(df, nama_kolom, lookup_dict):
    <span class="string">"""
    Menerapkan koreksi typo pada kolom tertentu.

    Return:
        DataFrame dengan kolom baru: {nama_kolom}_clean dan {nama_kolom}_corrected
    """</span>
    <span class="keyword">print</span>(<span class="function">f</span><span class="string">"\nMemproses kolom '{nama_kolom}'..."</span>)

    <span class="comment"># Terapkan koreksi</span>
    hasil = df[nama_kolom].<span class="function">apply</span>(<span class="keyword">lambda</span> x: <span class="function">koreksi_typo</span>(x, lookup_dict))

    <span class="comment"># Extract hasil</span>
    df[<span class="function">f</span><span class="string">'{nama_kolom}_clean'</span>] = hasil.<span class="function">apply</span>(<span class="keyword">lambda</span> x: x[<span class="number">0</span>])
    df[<span class="function">f</span><span class="string">'{nama_kolom}_corrected'</span>] = hasil.<span class="function">apply</span>(<span class="keyword">lambda</span> x: x[<span class="number">1</span>])
    df[<span class="function">f</span><span class="string">'{nama_kolom}_method'</span>] = hasil.<span class="function">apply</span>(<span class="keyword">lambda</span> x: x[<span class="number">2</span>])

    <span class="comment"># Statistik</span>
    total = <span class="function">len</span>(df)
    corrected = df[<span class="function">f</span><span class="string">'{nama_kolom}_corrected'</span>].<span class="function">sum</span>()

    <span class="keyword">print</span>(<span class="function">f</span><span class="string">"  - Baris dikoreksi: {corrected:,} ({corrected/total*100:.1f}%)"</span>)

    <span class="keyword">return</span> df

<span class="comment"># Terapkan pada ketiga kolom</span>
df_clean = df.<span class="function">copy</span>()
df_clean = <span class="function">terapkan_koreksi_kolom</span>(df_clean, <span class="string">'kondisi'</span>, LOOKUP_TYPO)
df_clean = <span class="function">terapkan_koreksi_kolom</span>(df_clean, <span class="string">'rekomendasi'</span>, LOOKUP_TYPO)
df_clean = <span class="function">terapkan_koreksi_kolom</span>(df_clean, <span class="string">'judul'</span>, LOOKUP_TYPO)</pre>
          </div>
        </div>
      </div>
    </section>

    <!-- Output Examples -->
    <section class="section">
      <div class="section-header">
        <h2>
          <span class="icon">üìä</span>
          Contoh Output: Before/After Cleaning
        </h2>
        <p>Perbandingan data sebelum dan sesudah proses koreksi typo</p>
      </div>

      <div class="card mb-4">
        <div class="card-header">
          <h3>Perbandingan Frekuensi Nilai - Field "kondisi"</h3>
        </div>
        <div class="card-body">
          <div class="grid-2">
            <div>
              <h4 style="color: var(--status-danger); margin-bottom: 1rem;">‚ùå Sebelum Koreksi</h4>
              <div class="table-container">
                <table>
                  <thead>
                    <tr>
                      <th>Nilai</th>
                      <th>Frekuensi</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>aman</td>
                      <td>485</td>
                    </tr>
                    <tr class="highlight">
                      <td><code>redy</code></td>
                      <td><strong>300</strong></td>
                    </tr>
                    <tr>
                      <td>ready</td>
                      <td>63</td>
                    </tr>
                    <tr>
                      <td>baik</td>
                      <td>546</td>
                    </tr>
                    <tr class="highlight">
                      <td><code>amn</code></td>
                      <td><strong>20</strong></td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <p style="margin-top: 1rem; color: var(--pln-gray-600); font-size: 0.875rem;">
                <strong>Masalah:</strong> Data terfragmentasi - "ready" dan "redy" dihitung terpisah
              </p>
            </div>
            <div>
              <h4 style="color: var(--pln-green); margin-bottom: 1rem;">‚úÖ Sesudah Koreksi</h4>
              <div class="table-container">
                <table>
                  <thead>
                    <tr>
                      <th>Nilai</th>
                      <th>Frekuensi</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>aman</td>
                      <td><strong>505</strong> <span class="badge badge-success">+20</span></td>
                    </tr>
                    <tr class="highlight">
                      <td>ready</td>
                      <td><strong>363</strong> <span class="badge badge-success">+300</span></td>
                    </tr>
                    <tr>
                      <td>baik</td>
                      <td>546</td>
                    </tr>
                    <tr>
                      <td><em>(typo hilang)</em></td>
                      <td>-</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <p style="margin-top: 1rem; color: var(--pln-gray-600); font-size: 0.875rem;">
                <strong>Hasil:</strong> Data terkonsolidasi - semua varian "ready" bergabung menjadi satu
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="card mb-4">
        <div class="card-header">
          <h3>Contoh Baris yang Dikoreksi</h3>
        </div>
        <div class="card-body">
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Original</th>
                  <th>Cleaned</th>
                  <th>Metode</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>redy</code></td>
                  <td><code>ready</code></td>
                  <td>exact_match</td>
                  <td><span class="badge badge-success">Corrected</span></td>
                </tr>
                <tr>
                  <td><code>bqik</code></td>
                  <td><code>baik</code></td>
                  <td>exact_match</td>
                  <td><span class="badge badge-success">Corrected</span></td>
                </tr>
                <tr>
                  <td><code>hidrqnt</code></td>
                  <td><code>hydrant</code></td>
                  <td>exact_match</td>
                  <td><span class="badge badge-success">Corrected</span></td>
                </tr>
                <tr>
                  <td><code>amn</code></td>
                  <td><code>aman</code></td>
                  <td>fuzzy_match(88)</td>
                  <td><span class="badge badge-success">Corrected</span></td>
                </tr>
                <tr>
                  <td><code>di perbaiki</code></td>
                  <td><code>diperbaiki</code></td>
                  <td>exact_match</td>
                  <td><span class="badge badge-success">Corrected</span></td>
                </tr>
                <tr>
                  <td><code>rusaj</code></td>
                  <td><code>rusak</code></td>
                  <td>fuzzy_match(91)</td>
                  <td><span class="badge badge-success">Corrected</span></td>
                </tr>
                <tr>
                  <td><code>normal</code></td>
                  <td><code>normal</code></td>
                  <td>-</td>
                  <td><span class="badge badge-info">No change</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="insights-grid">
        <div class="insight-item success">
          <div class="insight-title">Koreksi Field "kondisi"</div>
          <div class="insight-value">1.247 baris berhasil dikoreksi dari total 5.575 (22,4%)</div>
        </div>
        <div class="insight-item success">
          <div class="insight-title">Koreksi Field "rekomendasi"</div>
          <div class="insight-value">823 baris berhasil dikoreksi dari total 5.575 (14,8%)</div>
        </div>
        <div class="insight-item success">
          <div class="insight-title">Koreksi Field "judul"</div>
          <div class="insight-value">412 baris berhasil dikoreksi dari total 5.575 (7,4%)</div>
        </div>
      </div>
    </section>

    <!-- Results & Impact -->
    <section class="section">
      <div class="section-header">
        <h2>
          <span class="icon">üéØ</span>
          Hasil dan Dampak
        </h2>
        <p>Manfaat yang diperoleh dari proses pembersihan data</p>
      </div>

      <div class="analysis-box">
        <h4>Peningkatan Kualitas Data</h4>
        <ul>
          <li><strong>Data lebih konsisten</strong> - Tidak ada lagi duplikasi kata karena typo (ready vs redy, baik vs bqik)</li>
          <li><strong>Analisis frekuensi lebih akurat</strong> - Word frequency analysis sekarang menunjukkan angka sebenarnya</li>
          <li><strong>Pencarian lebih reliable</strong> - Filter untuk "hydrant" akan menangkap semua varian typo-nya</li>
          <li><strong>Siap untuk ML/AI</strong> - Data clean menjadi foundation untuk model prediksi di langkah selanjutnya</li>
        </ul>
      </div>

      <div class="card mb-4">
        <div class="card-header">
          <h3>Output File yang Dihasilkan</h3>
        </div>
        <div class="card-body">
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Properti</th>
                  <th>Value</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Nama File</strong></td>
                  <td><code>izat_indramayu_step1_typo_corrected.csv</code></td>
                </tr>
                <tr>
                  <td><strong>Lokasi</strong></td>
                  <td><code>/data/processed/</code></td>
                </tr>
                <tr>
                  <td><strong>Jumlah Baris</strong></td>
                  <td>5.575 baris (sama dengan input)</td>
                </tr>
                <tr>
                  <td><strong>Jumlah Kolom</strong></td>
                  <td>37 kolom (31 asli + 6 kolom baru)</td>
                </tr>
                <tr>
                  <td><strong>Kolom Baru</strong></td>
                  <td>
                    <code>kondisi_clean</code>, <code>kondisi_corrected</code><br>
                    <code>rekomendasi_clean</code>, <code>rekomendasi_corrected</code><br>
                    <code>judul_clean</code>, <code>judul_corrected</code>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="recommendation-box">
        <h4>üí° Langkah Selanjutnya</h4>
        <ul>
          <li><strong>Step 2: Standardisasi Lokasi</strong> - Parsing dan kategorisasi field "nama_lokasi" menjadi komponen terstruktur (zona, area, unit, lantai)</li>
          <li><strong>Step 3: Standardisasi Perusahaan</strong> - Normalisasi nama perusahaan dan kategorisasi PLN vs Vendor</li>
          <li><strong>Step 4: Standardisasi Tanggal</strong> - Parsing tanggal dan ekstraksi komponen waktu (bulan, quarter, shift, dll)</li>
          <li><strong>Step 5-7: Kolom Turunan</strong> - Menambah derived columns untuk risk scoring, quality scoring, dan trend analysis</li>
        </ul>
      </div>
    </section>

    <!-- Technical Notes -->
    <section class="section">
      <div class="section-header">
        <h2>
          <span class="icon">üìù</span>
          Catatan Teknis
        </h2>
      </div>

      <div class="grid-2">
        <div class="card">
          <div class="card-header">
            <h3>Dependencies</h3>
          </div>
          <div class="card-body">
            <div class="code-block">
<pre>pandas==<span class="number">2.0.0</span>
numpy==<span class="number">1.24.0</span>
rapidfuzz==<span class="number">3.0.0</span></pre>
            </div>
            <p style="margin-top: 1rem; color: var(--pln-gray-600); font-size: 0.875rem;">
              Install dengan: <code style="background: var(--pln-gray-100); padding: 0.25rem 0.5rem; border-radius: 0.25rem;">pip install pandas numpy rapidfuzz</code>
            </p>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Performance</h3>
          </div>
          <div class="card-body">
            <ul style="color: var(--pln-gray-600); list-style: none; padding: 0;">
              <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--pln-gray-100);">
                <strong>Processing time:</strong> ~15 detik untuk 5.575 baris
              </li>
              <li style="padding: 0.5rem 0; border-bottom: 1px solid var(--pln-gray-100);">
                <strong>Memory usage:</strong> ~50MB peak memory
              </li>
              <li style="padding: 0.5rem 0;">
                <strong>Scalability:</strong> Linear O(n) - dapat handle 100K+ rows
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="analysis-box mt-4">
        <h4>üîÑ Pengembangan Lebih Lanjut</h4>
        <ul>
          <li><strong>Kamus dapat diperluas</strong> - Jika menemukan typo baru, tambahkan ke KAMUS_STANDAR dan jalankan ulang notebook</li>
          <li><strong>Threshold dapat disesuaikan</strong> - Default 85%, bisa dinaikkan (lebih ketat) atau diturunkan (lebih longgar)</li>
          <li><strong>Proses dapat direpetisi</strong> - Pipeline idempotent, aman dijalankan berkali-kali</li>
          <li><strong>Logging tersedia</strong> - Setiap koreksi ter-track dengan flag "corrected" dan metode yang digunakan</li>
        </ul>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="logo-text">PT PLN Nusantara Power - UP Indramayu</div>
        <p>Laporan Data Cleansing - IZAT K3</p>
        <p>Step 1: Koreksi Typo dengan Fuzzy Matching</p>
        <p style="margin-top: 1rem; font-size: 0.8rem; opacity: 0.8;">
          Generated: Desember 2025 | Confidential - Internal Use Only
        </p>
      </div>
    </div>
  </footer>

  <!-- Lightbox Modal -->
  <div class="lightbox-overlay" id="lightbox">
    <div class="lightbox-content">
      <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
      <img src="" alt="" id="lightbox-img">
      <div class="lightbox-caption" id="lightbox-caption"></div>
    </div>
  </div>

  <script>
    // Lightbox functionality
    document.querySelectorAll('.image-card').forEach(card => {
      card.addEventListener('click', function() {
        const img = this.querySelector('img');
        const caption = this.querySelector('figcaption');
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        const lightboxCaption = document.getElementById('lightbox-caption');

        lightboxImg.src = img.src;
        lightboxImg.alt = img.alt;
        lightboxCaption.textContent = caption ? caption.textContent : '';
        lightbox.classList.add('active');
      });
    });

    function closeLightbox() {
      document.getElementById('lightbox').classList.remove('active');
    }

    // Close modals on overlay click or Escape key
    document.getElementById('lightbox').addEventListener('click', function(e) {
      if (e.target === this) closeLightbox();
    });
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeLightbox();
      }
    });
  </script>
</body>
</html>
